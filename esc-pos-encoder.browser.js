/**
 * ESC/POS Encoder Library
 * This file turns your receipt text into print commands.
 * v2.1.0
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).EscPosEncoder={})}(this,(function(t){"use strict";const e={LF:10,FS:28,FF:12,GS:29,DLE:16,EOT:4,ENQ:5,SP:32,HT:9,ESC:27,VT:11},n={};n[n.UPC_A=0]=void 0,n[n.UPC_E=1]=void 0,n[n.EAN13=2]=void 0,n[n.EAN8=3]=void 0,n[n.CODE39=4]=void 0,n[n.ITF=5]=void 0,n[n.CODABAR=6]=void 0,n[n.CODE93=69]=void 0,n[n.CODE128=73]=void 0;var o={};o[o.No=0]=void 0,o[o.Up=1]=void 0,o[o.Down=2]=void 0,o[o.Both=3]=void 0;var r={};r[r.None=0]=void 0,r[r.Two=1]=void 0,r[r.Three=2]=void 0,r[r.Four=3]=void 0;var i={};i[i.Default=0]=void 0,i[i.A=0]=void 0,i[i.B=1]=void 0;var s={};s[s.Left=0]=void 0,s[s.Center=1]=void 0,s[s.Right=2]=void 0;var a={};a[a.Level_L=0]=void 0,a[a.Level_M=1]=void 0,a[a.Level_Q=2]=void 0,a[a.Level_H=3]=void 0;class l{constructor(){this._buffer=[e.ESC,64]}_reset(){this._buffer=[e.ESC,64]}get buffer(){return this._buffer}size(t,e){let o=0;switch(t){case"small":o=1;break;case"normal":o=0}let r=0;switch(e){case"small":r=1;break;case"normal":r=0}let i=r<<4|o;return this._buffer.push(e.GS,33,i),this}width(t,e){let n=0;switch(t){case"small":n=1;break;case"normal":n=0}let o=0;switch(e){case"normal":o=0;break;case"medium":o=16;break;case"large":o=32}let r=n|o;return this._buffer.push(e.GS,33,r),this}height(t,n){let o=0;switch(t){case"small":o=1;break;case"normal":o=0}let r=0;switch(n){case"normal":r=0;break;case"medium":r=1;break;case"large":r=2}let i=o|r;return this._buffer.push(e.GS,33,i),this}font(t){let n=0;switch(t){case"A":n=0;break;case"B":n=1}return this._buffer.push(e.ESC,77,n),this}align(t){let n=0;switch(t){case"left":n=0;break;case"center":n=1;break;case"right":n=2}return this._buffer.push(e.ESC,97,n),this}bold(t){return this._buffer.push(e.ESC,69,t?1:0),this}underline(t){let n=0;switch(t){case!1:n=0;break;case!0:n=1;break;case"double":n=2}return this._buffer.push(e.ESC,45,n),this}invert(t){return this._buffer.push(e.GS,66,t?1:0),this}color(t){let e=0;switch(t){case"black":e=0;break;case"red":e=1}return this._buffer.push(27,114,e),this}text(t,e,n){if(this._codepage){this._buffer.push(e.ESC,116,this._codepage)}if(void 0!==e){let t=e-this._buffer.length%e;t>0&&this._buffer.push(e.SP)}if(void 0!==n){let t=this._buffer.length;return this.text(t,"left"),this.text(e,t,n),this}this._buffer.push(...this._textencoder.encode(t)),this}text(t,e,n){if(void 0!==e||void 0!==n){let i=this._buffer.length;this.align(n||"left"),this._buffer.push(...this._textencoder.encode(t));let s=this._buffer.length-i,a=s%(e||32);a>0&&this._buffer.push(...new Array(a).fill(32))}else this._buffer.push(...this._textencoder.encode(t));return this}c(t,n){return this.text(t,n,"center")}r(t,n){return this.text(t,n,"right")}l(t,n){return this.text(t,n,"left")}feed(t){return this._buffer.push(e.ESC,100,t||1),this}lineFeed(t){return this._buffer.push(...new Array(t||1).fill(10)),this}control(t){let n=0;switch(t){case"lf":n=10;break;case"ff":n=12;break;case"cr":n=13;break;case"ht":n=9;break;case"vt":n=11}return this._buffer.push(n),this}cut(t){let n=0;switch(t){case"full":n=0;break;case"partial":n=1}return this._buffer.push(e.GS,86,n),this}pulse(t,e,n){(t||"drawer1")==="drawer1"?this._buffer.push(e.ESC,112,0,e||100,n||200):this._buffer.push(e.ESC,112,1,e||100,n||200),this}codepage(t){switch(t){case"cp437":this._codepage=0;break;case"cp850":this._codepage=2;break;case"cp852":this._codepage=18;break;case"cp860":this._codepage=3;break;case"cp863":this._codepage=4;break;case"cp865":this._codepage=5;break;case"cp866":this._codepage=17;break;case"cp1252":this._codepage=16;break;default:this._codepage=0}return this}barcode(t,e,o){if(e==="CODE128"||e===n.CODE128){let n=this._textencoder.encode(t);return this._buffer.push(29,107,73,n.length,...n),this}if(e==="CODE93"||e===n.CODE93){let n=this._textencoder.encode(t);return this._buffer.push(29,107,72,n.length,...n),this}let r,i;switch(e){case"UPC-A":r=0;break;case"UPC-E":r=1;break;case"EAN13":r=2;break;case"EAN8":r=3;break;case"CODE39":r=4;break;case"ITF":r=5;break;case"CODABAR":r=6;break;default:r=0}switch(o){case"above":i=1;break;case"below":i=2;break;case"both":i=3;break;default:i=0}this._buffer.push(e.GS,104,50),this._buffer.push(e.GS,119,2),this._buffer.push(e.GS,72,i);let s=this._textencoder.encode(t);return this._buffer.push(29,107,r,...s,0),this}qrcode(t,e,n,o){this._buffer.push(e.GS,40,107,4,0,49,65,n||2,0),this._buffer.push(e.GS,40,107,3,0,49,67,e||3);let r=0;switch(o){case"L":r=48;break;case"M":r=49;break;case"Q":r=50;break;case"H":r=51}this._buffer.push(e.GS,40,107,3,0,49,69,r);let i=this._textencoder.encode(t);i.length>7092&&console.warn("QRCode data is too long.");let s=i.length+3;return this._buffer.push(e.GS,40,107,s%256,s/256,49,80,48,...i),this._buffer.push(e.GS,40,107,3,0,49,81,48),this}image(t,e,n){this._buffer.push(29,118,48,0,e/8%256,e/8/256,n%256,n/256);for(let o=0;o<n;o++){for(let n=0;n<e/8;n++){let e=0;for(let r=0;r<8;r++){t[o*e/8*8+n*8+r]&&e_e+=128>>r}this._buffer.push(e)}}return this.lineFeed(1),this}raw(t){return this._buffer.push(...t),this}encode(){return new Uint8Array(this._buffer)}constructor(){this._buffer=[],this._textencoder=new TextEncoder,this._codepage=0,this._reset()}}t.default=l,Object.defineProperty(t,"__esModule",{value:!0})}));
